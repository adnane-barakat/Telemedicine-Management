<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Gestion Patients</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- font awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- owl carousel -->
         
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- custom css -->
         
        <link rel = "stylesheet" href = "assets/css/main.css" />
        <link rel = "stylesheet" href = "assets/css/utilities.css" />
        <!-- normalize.css -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        

<style>

input, button {
    width: 100%;
    padding: 10px;
    margin: 5px 0;
    font-size: 16px;
}

</style>



    </head>
    <body>
        
        <div class="page-wrapper">
            <!-- header -->
            <header class = "header">
                <nav class = "navbar">
                    <div class="container">
                        <div class="navbar-content d-flex justify-content-between align-items-center">
                            <div class = "brand-and-toggler d-flex align-items-center justify-content-between">
                                <a href = "#" class = "navbar-brand d-flex align-items-center">
                                    <span class="brand-shape d-inline-block text-white">GC</span>
                                    <span class="brand-text fw-7">Gestion Clinique</span>
                                </a>
                                <button type = "button" class = "d-none navbar-show-btn">
                                    <i class = "fas fa-bars"></i>
                                </button>
                            </div>

                            <div class = "navbar-box">
                                <button type = "button" class = "navbar-hide-btn">
                                    <i class = "fas fa-times"></i>
                                </button>

                               
                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>

                <div class="element-one">
                    <img src = "assets/images/element-img-1.png" alt = "">
                </div>

                <div class="banner">
                    <div class="container">
                        <div class="banner-content">
                            <div class="banner-left">
                                <div class="content-wrapper">
                                    <h1 class="banner-title">Bienvenue sur la plateforme !</h1>
                                    <p class="text text-white">Gestion Clinique est une application intuitive et performante conçue pour simplifier la gestion des patients, médecins, dossiers médicaux, prescriptions, des rendez-vous,des notifications et des suivis des patients. Développée avec la technologie SOAP et REST, cette plateforme garantit une communication fiable et standardisée entre les différents services, tout en assurant la sécurité et l'intégrité des données.</p>
                                    <a href = "#sc-services" class="btn btn-light" style="font-weight:bold!important;color:black!important;">Commencer la Gestion des Patients !</a>
                                </div>
                            </div>

                            <div class = "banner-right d-flex align-items-center justify-content-end">
                                <img src = "assets/images/banner-image.png" alt = "">
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- end of header -->

            <main>
                <section class = "sc-services" id="sc-services">
                    <div class = "services-shape">
                        <img src = "assets/images/curve-shape-1.png" alt = "">
                    </div>
                    <div class="container">
                        <div class = "services-content">
                            <div class="title-box text-center">
                                <div class = "content-wrapper">
                                    <h3 class = "title-box-name">Gestions des Patients</h3>
                                    <div class = "title-separator mx-auto"></div>
                                   
                                </div>
                            </div>

                           


                                <!-- Section: Gestion des Patients -->
        <section>
            
            <form id="createPatientForm">
                <label for="patientNom">Nom:</label>
                <input type="text" id="patientNom" required>
                <label for="patientPrenom">Prénom:</label>
                <input type="text" id="patientPrenom" required>
                <label for="patientEmail">Email:</label>
                <input type="email" id="patientEmail" required>
                <button class="alert alert-success" style="font-weight:bold;" type="submit">Ajouter Patient</button>
            </form>

            <form id="updatePatientForm">
                <label for="updatePatientId">Patient ID:</label>
                <input type="number" id="updatePatientId" required>
                <label for="newPatientNom">Nouveau Nom:</label>
                <input type="text" id="newPatientNom" required>
                <label for="newPatientPrenom">Nouveau Prénom:</label>
                <input type="text" id="newPatientPrenom" required>
                <label for="newPatientEmail">Nouvel Email:</label>
                <input type="email" id="newPatientEmail" required>
                <button class="alert alert-info" style="font-weight:bold;" type="submit">Mettre à jour Patient</button>
            </form>


            <form id="deletePatientForm">
                <label for="deletePatientId">Patient ID à supprimer:</label>
                <input type="number" id="deletePatientId" required>
                <button class="alert alert-danger" style="font-weight:bold;" type="submit">Supprimer Patient</button>
            </form>

            <button class="alert alert-primary" style="font-weight:bold;" id="getAllPatients">Afficher tous les patients</button>
            <pre class="alert alert-secondary" style="font-weight:bold;" id="patientResult"></pre>
        </section>

                                


                            

                           
                        </div>
                    </div>
                </section>

        
            </main>

            <footer class = "footer" id="footer">
                <div class = "container">
                    <div class = "footer-content">
                        <div class = "footer-list d-grid text-white">
                            <div class = "footer-item">
                                <a href = "#" class = "navbar-brand d-flex align-items-center">
                                    <span class = "brand-shape d-inline-block text-white">GC</span>
                                    <span class = "brand-text fw-7">Gestion Clinique</span>
                                </a>
                                <p class = "text-white">Gestion Clinique est une application intuitive et performante conçue pour simplifier la gestion des patients, médecins, dossiers médicaux, prescriptions, des rendez-vous,des notifications et des suivis des patients.</p>
                                <p class = "text-white copyright-text">&copy; Gestion Clinique 2024. All rights reserved.</p>
                            </div>

                            <div class = "footer-item">
                                <h3 class = "footer-item-title">Company</h3>
                                <ul class = "footer-links">
                                    <li><a href = "index.html">Home</a></li>
                                    <li><a href = "index.html#sc-services">Services</a></li>
                                   
                                </ul>
                            </div>

                            <div class = "footer-item">
                                <h3 class = "footer-item-title">Region</h3>
                                <ul class = "footer-links">
                                    <li><a >Rabat</a></li>
                                    <li><a >Casa</a></li>
                                    <li><a >Fes</a></li>
                                    <li><a >Meknes</a></li>
                                </ul>
                            </div>

                            <div class = "footer-item">
                                <h3 class = "footer-item-title">Contact</h3>
                                <ul class = "footer-links">
                                    <li><a >+212 06 83 43 28 43</a></li>
                                    <li><a >contact@gc.ma</a></li>
                                    
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class = "footer-element-1">
                    <img src = "assets/images/element-img-4.png" alt = "">
                </div>
                <div class = "footer-element-2">
                    <img src = "assets/images/element-img-5.png" alt = "">
                </div>
            </footer>
        </div>
        



        <!-- jquery cdn -->
        <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
        <!-- owl carousel -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- custom js -->
        <script src = "assets/js/script.js"></script>
        <script src = "script.js"></script>
        <script>
            // Gestion des Patients
document.getElementById("createPatientForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const nom = document.getElementById("patientNom").value;
    const prenom = document.getElementById("patientPrenom").value;
    const email = document.getElementById("patientEmail").value;

    const soapRequest = `
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://implementations.clinique.com/">
           <soapenv:Body>
              <tns:ajouterPatient>
                 <nom>${nom}</nom>
                 <prenom>${prenom}</prenom>
                 <email>${email}</email>
              </tns:ajouterPatient>
           </soapenv:Body>
        </soapenv:Envelope>
    `;
    const result = await sendSoapRequest(endpoints.patient, soapRequest);
    document.getElementById("patientResult").textContent = result;
});

// Modifier un patient
document.getElementById("updatePatientForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const id = document.getElementById("updatePatientId").value;
    const nom = document.getElementById("newPatientNom").value;
    const prenom = document.getElementById("newPatientPrenom").value;
    const email = document.getElementById("newPatientEmail").value;

    const soapRequest = `
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://implementations.clinique.com/">
           <soapenv:Body>
              <tns:modifierPatient>
                 <id>${id}</id>
                 <nom>${nom}</nom>
                 <prenom>${prenom}</prenom>
                 <email>${email}</email>
              </tns:modifierPatient>
           </soapenv:Body>
        </soapenv:Envelope>
    `;
    const result = await sendSoapRequest(endpoints.patient, soapRequest);
    document.getElementById("patientResult").textContent = result;
});

// Supprimer un patient
document.getElementById("deletePatientForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const id = document.getElementById("deletePatientId").value;

    const soapRequest = `
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://implementations.clinique.com/">
           <soapenv:Body>
              <tns:supprimerPatient>
                 <id>${id}</id>
              </tns:supprimerPatient>
           </soapenv:Body>
        </soapenv:Envelope>
    `;
    const result = await sendSoapRequest(endpoints.patient, soapRequest);
    document.getElementById("patientResult").textContent = result;
});


document.getElementById("getAllPatients").addEventListener("click", async () => {
    // Requête SOAP pour afficher tous les patients
    const soapRequest = `
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://implementations.clinique.com/">
            <soapenv:Body>
                <tns:afficherTousLesPatients/>
            </soapenv:Body>
        </soapenv:Envelope>
    `;
    
    // Envoi de la requête SOAP
    const result = await sendSoapRequest("http://localhost:8080/ws/patient", soapRequest);

    // Appel de la fonction pour afficher les patients dans un tableau
    displayPatients(result);
});

// Fonction pour afficher les patients dans un tableau
function displayPatients(soapResponse) {
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(soapResponse, "text/xml");

    // Extraire la liste des patients depuis la réponse SOAP
    const patients = xmlDoc.getElementsByTagName("patient");

    // Si aucun patient n'est trouvé, afficher un message
    if (patients.length === 0) {
        document.getElementById("patientResult").innerHTML = "Aucun patient trouvé.";
        return;
    }

    // Créer un tableau HTML pour afficher les patients
    let table = '<table class="table table-striped"><thead class="table-dark"><th>ID</th><th>Nom</th><th>Prénom</th><th>Email</th></thead>';

    // Parcourir tous les patients et ajouter chaque patient dans une ligne du tableau
    for (let i = 0; i < patients.length; i++) {
        let patient = patients[i];
        let id = patient.getElementsByTagName("id")[0].textContent;
        let nom = patient.getElementsByTagName("nom")[0].textContent;
        let prenom = patient.getElementsByTagName("prenom")[0].textContent;
        let email = patient.getElementsByTagName("email")[0].textContent;

        table += `<tr><td>${id}</td><td>${nom}</td><td>${prenom}</td><td>${email}</td></tr>`;
    }

    table += "</table>";
    document.getElementById("patientResult").innerHTML = table;  // Afficher le tableau dans la page
}

        </script>


    </body>
</html>